{% extends 'base.html' %}
{% block content %}


{% if user.is_authenticated %}

<header id="header">
    <nav class="navbar navbar-inverse navbar-fixed-top" style="border-style: none;">
        <div class="container">
            <div class="col-md-12" style="padding:10px 0px 10px 0px;">
                <div class="col-md-6">
                    <span style="color:#FFB03B;font-weight:bold;margin-top:10px;">Investment portfolio</span>
                </div>
                <div class="col-md-6">
                    <span class="pull-right" style="color:White;font-weight:bold;">Welcome {{ user.username }} | <a
                            href="{% url 'logout' %}">Logout</a></span>
                </div>

            </div>
        </div>
    </nav>
</header>

<div class="container" style="margin-top:100px;">
    <div class="row">
        <div class=" col-md-3 col-xs-12">
            <h3><b>Portfolio</b></h3>
            {% for portfolio in portfolios %}
                <a href="{% url 'home'  %}">{{ portfolio.name.upper }}</a><br>
            {% endfor %}
        </div>
        <div class="col-md-8 col-xs-12">
            <div class="panel panel-default">
                <div id="chart_panel" class="panel-body"
                     style="width:100%;height:500px"></div>
            </div>
        </div>
    </div>
</div>


{% else %}
<span class="pull-right menu-icon"> <a href="{% url 'signup' %}">Sign up</a><b>|</b><a
        href="{% url 'login' %}">Login</a></span>
{% endif %}

<script type="text/javascript">
$(document).ready(function() {
    var user_graph = {
    chart: {
    renderTo: 'chart_panel',
    type: 'line',
    },
    legend: {enabled: false},
    title: {text: 'User Share Details'},
    subtitle: {text: 'Net Nav Vs Date'},
    xAxis: {title: {text: null}, labels: {rotation: -45}},
    yAxis: {title: {text: null}},
    series: [{}],
    };

    var chartDataUrl = "{% url 'bar'  %}";
    $.getJSON(chartDataUrl,
    function(data) {
    user_graph.xAxis.categories = data['dates'];
    user_graph.series[0].name = 'price in $';
    user_graph.series[0].data = data['net_nav'];

    var chart = new Highcharts.Chart(user_graph);
    });
} );

</script>
{% endblock %}